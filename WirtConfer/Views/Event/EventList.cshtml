@model IEnumerable<Event_>

@inject WirtConfer.Data.ApplicationDbContext _dbContext
@inject Microsoft.AspNetCore.Identity.UserManager<User> _userManager
@using Microsoft.EntityFrameworkCore;



<div id="PlaceHolderHere">

</div>
<button type="button" class="btn btn-primary" data-toggle="ajax-modal" data-target="#CreateEv"
        data-url="@Url.Action("CreateEv")">
    Create event
</button>

<p class="mb-5">

</p>
@if (Enumerable.Count(Model) == 0)
{
    <h3 class="lead">You haven't create any event yet</h3>
}
else
{
    <table class="table table-striped" align="center">
        <thead class="thead-dark">
            <tr>
                <th class="lead">Event name</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var e in Model)
            {
                <tr>
                    <td>
                        <a class="lead " asp-controller="Event" asp-action="Event" asp-route-id="@e.Id"> @e.Name </a>
                    </td>

                    @if (e.OwnerId == _userManager.GetUserId(User))
                    {
                        <td>
                            <a class="btn btn-danger" asp-controller="Event" asp-action="DeleteEv" asp-route-id="@e.Id"> Delete </a>
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
}


